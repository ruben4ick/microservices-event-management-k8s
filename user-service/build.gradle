dependencies {
    implementation 'org.springframework.boot:spring-boot-starter-actuator'
    implementation 'de.codecentric:spring-boot-admin-starter-client:3.2.3'
    implementation("io.micrometer:micrometer-registry-otlp")
    implementation("io.micrometer:micrometer-tracing-bridge-otel")
    runtimeOnly("io.opentelemetry:opentelemetry-exporter-otlp")
}

tasks.withType(Test).configureEach {
    def envFile = file("$projectDir/../.env")
    if (envFile.exists()) {
        envFile.readLines()
                .findAll { it && !it.startsWith("#") && it.contains("=") }
                .each {
                    def (k, v) = it.split("=", 2)
                    environment k.trim(), v.trim()
                }
    }
}
